<!DOCTYPE html>
<html>
<head>
	<script src="/assets/markdown/sh/shCore.js"></script>
	<script src="/assets/markdown/sh/brushes.js"></script>
	<link rel="stylesheet" href="/assets/markdown/sh/shCoreDefault.css">

	<link rel="stylesheet" href="/assets/markdown/default.css">
	<title>Nobone Documentation</title>
</head>
<body>

<div id="main">
	<h2 id="mss">MSS</h2>
<h3 id="write-css-in-functional-ways">Write css in functional ways</h3>
<p>This library is inspired by clay CSS compiler(haskell), while i&#39;m looking for a better way to write CSS in front end environment (browsers js runtime). actually it&#39;s easy and expressive, so let&#39;s begin:</p>
<h3 id="warm-up">Warm up</h3>
<p>If you are familiar with <a href="http://livescript.net">LiveScript</a>, you can skip this section.</p>
<h4 id="-and-do">! and do</h4>
<p>! in LiveScript simplily means apply a function with no argmenuts, do means you want pass a plain object to function, eg(LiveScript =&gt; Javascript):</p>
<pre><code>foo = (bar = 8) -&gt; console.log bar
foo! 

foobar do
    a: 1
    b: {c:2}
</code></pre><p>=&gt;</p>
<pre><code>var foo;
foo = function(bar){
  bar == null &amp;&amp; (bar = 8);
  return console.log(bar);
};
foo();
//console will log 8

foobar({
  a: 1,
  b: {
    c: 2
  }
});
</code></pre><h4 id="-">&lt;|</h4>
<p>&lt;| stand for pipe(borrowed from F#, aka. $ in haskell), it mean apply the right value to the left function, so here we go:</p>
<pre><code>foo = (x) -&gt; (y) -&gt; console.log x + y
foo 2 &lt;| 3
</code></pre><p>=&gt;</p>
<pre><code>var foo;
foo = function(x){
  return function(y){
    return console.log(x + y);
  };
};
foo(2)(3);
//console will log 5
</code></pre><h3 id="how-does-mss-work-">How does MSS work?</h3>
<p>MSS.parse reveive a mss object to output a css string:</p>
<pre><code>mss =
    fooClass:
        zIndex: 999
        $BarId_anotherClass:
            MozBoxShadow: &#39;10px 10px 5px #888888&#39;
            Input:
                borderRadius: &#39;12px&#39;
                padding: &#39;12px&#39;
                width: &#39;100%&#39;   

//will generate following CSS
.fooClass #barId input,
.fooClass .anotherClass input{
  border-radius:12px;
  padding:12px;
  width:100%;
}
.fooClass #barId,
.fooClass .anotherClass{
  -moz-box-shadow:10px 10px 5px #888888;
}
.fooClass{
  z-index:999;
}
</code></pre><p>In another word, a mss object is an object tree, a key will be a CSS selector if the value is another mss object, otherwise it will be property name for CSS, the nested selectors will be concated into a descendant selector, the rules for MSS selectors are:</p>
<ul>
<li>lowerCaseSelector =&gt; .lowerCaseSelector</li>
<li>UpperCaseSelector =&gt; UpperCaseSelector</li>
</ul>

</div>

<div id="toc">
	<h1>Table of Contents</h1>
	<div class="content"></div>
</div>

<script type="text/javascript" src="/assets/markdown/main.js"></script>

<script type="text/javascript">
	[].slice.apply(document.querySelectorAll('pre code[class]')).forEach(function (el) {
		var lang = el.getAttribute('class').replace('lang-', '');
		el.parentElement.setAttribute('class', 'brush: ' + lang + ';');
		el.parentElement.innerHTML = el.innerHTML
	});
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>

</body>
</html>


<!-- Nobone Client Helper -->
<script type="text/javascript">

// Generated by CoffeeScript 1.8.0
var Nobone;

Nobone = (function() {
  function Nobone(opts) {
    'use strict';
    var init, initAutoReload, self;
    self = this;
    init = function() {
      if (opts.autoReload) {
        return initAutoReload();
      }
    };
    self.log = function(msg, action) {
      var req;
      if (action == null) {
        action = 'log';
      }
      console[action](msg);
      req = new XMLHttpRequest;
      req.open('POST', '/nobone-log');
      req.setRequestHeader('Content-Type', 'application/json');
      return req.send(JSON.stringify(msg));
    };
    initAutoReload = function() {
      var es, isConnected;
      es = new EventSource(opts.host + '/nobone-sse/autoReload');
      isConnected = false;
      es.addEventListener('connect', function(e) {
        var data;
        if (isConnected) {
          location.reload();
        }
        data = JSON.parse(e.data);
        if (data === 'ok') {
          return isConnected = true;
        }
      });
      return es.addEventListener('fileModified', function(e) {
        var each, msg, reloadElem;
        msg = JSON.parse(e.data);
        console.log(">> fileModified: " + msg.reqPath);
        reloadElem = function(el, key) {
          var body;
          if (el[key].indexOf('?') === -1) {
            el[key] += '?nbAutoReload=0';
          } else {
            if (el[key].indexOf('nbAutoReload') > -1) {
              el[key] = el[key].replace(/nbAutoReload=(\d+)/, function(m, p) {
                return 'nbAutoReload=' + (+p + 1);
              });
            } else {
              el[key] += '&nbAutoReload=0';
            }
          }
          body = document.body;
          body.style.display = 'none';
          body.offsetHeight;
          return setTimeout(function() {
            return body.style.display = 'block';
          }, 50);
        };
        each = function(qs, handler) {
          var elems;
          elems = document.querySelectorAll(qs);
          return [].slice.apply(elems).forEach(handler);
        };
        if (!msg.reqPath) {
          location.reload();
          return;
        }
        switch (msg.extBin) {
          case '.js':
            return each('script', function(el) {
              if (el.src.indexOf(msg.reqPath) > -1) {
                return location.reload();
              }
            });
          case '.css':
            return each('link', function(el) {
              if (el.href.indexOf(msg.reqPath) > -1) {
                return reloadElem(el, 'href');
              }
            });
          case '.jpg':
          case '.gif':
          case '.png':
            return each('img', function(el) {
              if (el.src.indexOf(msg.reqPath) > -1) {
                return reloadElem(el, 'src');
              }
            });
          default:
            return location.reload();
        }
      });
    };
    init();
  }

  return Nobone;

})();

window.nb = new Nobone({"autoReload":true,"host":""});

</script>

